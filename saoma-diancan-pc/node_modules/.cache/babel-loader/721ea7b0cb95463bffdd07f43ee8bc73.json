{"remainingRequest":"E:\\Uni-app\\MealOrderAll\\saoma-diancan-pc\\node_modules\\babel-loader\\lib\\index.js!E:\\Uni-app\\MealOrderAll\\saoma-diancan-pc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\Uni-app\\MealOrderAll\\saoma-diancan-pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Uni-app\\MealOrderAll\\saoma-diancan-pc\\src\\page\\set-up\\modify-infor.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Uni-app\\MealOrderAll\\saoma-diancan-pc\\src\\page\\set-up\\modify-infor.vue","mtime":1631042822863},{"path":"E:\\Uni-app\\MealOrderAll\\saoma-diancan-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661081563152},{"path":"E:\\Uni-app\\MealOrderAll\\saoma-diancan-pc\\node_modules\\babel-loader\\lib\\index.js","mtime":1661081563906},{"path":"E:\\Uni-app\\MealOrderAll\\saoma-diancan-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661081563152},{"path":"E:\\Uni-app\\MealOrderAll\\saoma-diancan-pc\\node_modules\\vue-loader\\lib\\index.js","mtime":1661081552174}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:/Uni-app/MealOrderAll/saoma-diancan-pc/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _console = console,\n    log = _console.log;\nexport default {\n  data: function data() {\n    return {\n      whether: false,\n      setup: '设置店铺信息',\n      butn: '提交',\n      load: false,\n      action: this.Urls.m().uploadres,\n      // 上传logoing\n      loadmen: false,\n      // 上个页面传来的id\n      id: '',\n      name: '',\n      address: '',\n      logo: [],\n      dialogImageUrl: '',\n      dialogVisible: false\n    };\n  },\n  methods: {\n    // 展开大图\n    handlepreview: function handlepreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    // 上传失败\n    onErr: function onErr(e) {\n      this.loadmen = false;\n      this.$message.error('上传失败,尝试重新上传');\n    },\n    // 上传时\n    project: function project(file) {\n      this.loadmen = true;\n    },\n    // logo移除文件时的钩子\n    logoRemove: function logoRemove(file, fileList) {\n      this.logo = [];\n    },\n    // 上传成功：logo\n    logoSuccess: function logoSuccess(res, file, fileList) {\n      console.log(res);\n      console.log(file);\n      this.logo.push({\n        url: res.data,\n        uid: file.uid\n      }); //element展示图片时需要数组类型的才能展示\n\n      this.loadmen = false;\n    },\n    // 返回上一页\n    reTurn: function reTurn() {\n      this.$router.push({\n        name: 'set-up'\n      });\n    },\n    // 提交或修改\n    bTns: function bTns(is) {\n      this.load = true;\n      var obj = {\n        id: this.id,\n        name: this.name,\n        address: this.address,\n        logo: JSON.stringify(this.logo)\n      };\n\n      if (is == '提交') {\n        console.log('提交');\n        this.purequest(obj, is, this.Urls.m().uploadshop);\n      } else {\n        console.log('修改'); // 提交修改\n\n        this.purequest(obj, is, this.Urls.m().modifyshop);\n      }\n    },\n    // 提交或修改公用请求\n    purequest: function () {\n      var _purequest = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(obj, is, url) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return new this.Request(url, this.$qs.stringify(obj)).modepost();\n\n              case 3:\n                res = _context.sent;\n\n                if (res.status != 200) {\n                  new this.mytitle(this.$message, 'warning', res.data.msg).funtitle();\n                } else {\n                  new this.mytitle(this.$message, 'success', res.data.msg).funtitle();\n                  localStorage.setItem(\"company\", this.name);\n\n                  if (is == '提交') {\n                    this.$router.push({\n                      name: 'index'\n                    });\n                  } else {\n                    this.$router.push({\n                      name: 'set-up'\n                    });\n                  }\n                }\n\n                this.load = false;\n                _context.next = 12;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                this.load = false;\n                new this.mytitle(this.$message, 'error', '服务器发生错误,请重试').funtitle();\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 8]]);\n      }));\n\n      function purequest(_x, _x2, _x3) {\n        return _purequest.apply(this, arguments);\n      }\n\n      return purequest;\n    }()\n  },\n  created: function created() {\n    var res = this.$route.params.data;\n    console.log(res);\n\n    if (res == undefined) {\n      this.whether = false;\n      this.setup = '设置店铺信息';\n      this.butn = '提交';\n    } else {\n      this.whether = true;\n      this.setup = '修改店铺信息';\n      this.butn = '提交修改';\n      this.id = res._id, this.name = res.name, this.address = res.address, this.logo = res.logo;\n    }\n  }\n};",{"version":3,"sources":["modify-infor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div class=\"max-wid\" v-loading.fullscreen.lock=\"loadmen\">\r\n\t<div class=\"heading\">\r\n\t\t<p @click=\"reTurn()\" v-if=\"whether\">返回上一页</p>\r\n\t\t<p class=\"heading-users\">{{setup}}</p>\r\n\t</div>\r\n\t<!-- 店铺名称 -->\r\n\t<div class=\"image-view-title\">\r\n\t\t<div class=\"image-list\">店铺名称</div>\r\n\t\t<el-input v-model=\"name\" placeholder=\"请输入店铺名称\"></el-input>\r\n\t</div>\r\n\t<!-- 店铺地址 -->\r\n\t<div class=\"image-view-title\">\r\n\t\t<div class=\"image-list\">店铺地址</div>\r\n\t\t<el-input v-model=\"address\" type=\"text\" placeholder=\"请输入店铺地址\"></el-input>\r\n\t</div>\r\n\t<!-- 店铺logo -->\r\n\t<div class=\"image-view-title\">\r\n\t\t<div class=\"image-list\">店铺logo</div>\r\n\t\t<div>\r\n\t\t\t<el-upload\r\n\t\t\t  :action=\"action\"\r\n\t\t\t  list-type=\"picture-card\"\r\n\t\t\t  name=\"file\"\r\n\t\t\t  accept=\".jpg,.png,.webp,.jfif\"\r\n\t\t\t  :limit=\"1\"\r\n\t\t\t  :on-remove=\"logoRemove\"\r\n\t\t\t  :on-success=\"logoSuccess\"\r\n\t\t\t  :on-preview=\"handlepreview\"\r\n\t\t\t  :multiple=\"false\"\r\n\t\t\t  :on-error=\"onErr\"\r\n\t\t\t  :before-upload=\"project\"\r\n\t\t\t  :file-list=\"logo\"\r\n\t\t\t  >\r\n\t\t\t  <i class=\"el-icon-plus\"></i>\r\n\t\t\t</el-upload>\r\n\t\t\t<!-- 大图展开 -->\r\n\t\t\t<el-dialog :visible.sync=\"dialogVisible\">\r\n\t\t\t  <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n\t\t\t</el-dialog>\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n\t<!-- 提交 -->\r\n\t<div class=\"image-button\">\r\n\t\t<el-button type=\"success\" size=\"medium\" @click=\"bTns(butn)\" :loading=\"load\" :disabled=\"load\">{{butn}}</el-button>\r\n\t</div>\r\n</div>\n</template>\n\n<script>\r\nvar {log} = console\r\nexport default{\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\twhether:false,\r\n\t\t\tsetup:'设置店铺信息',\r\n\t\t\tbutn:'提交',\r\n\t\t\tload:false,\r\n\t\t\taction:this.Urls.m().uploadres,\r\n\t\t\t// 上传logoing\r\n\t\t\tloadmen:false,\r\n\t\t\t// 上个页面传来的id\r\n\t\t\tid:'',\r\n\t\t\tname: '',\r\n\t\t\taddress:'',\r\n\t\t\tlogo:[],\r\n\t\t\tdialogImageUrl: '',\r\n\t\t\tdialogVisible: false,\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\t// 展开大图\r\n\t\thandlepreview(file) {\r\n\t\t  this.dialogImageUrl = file.url;\r\n\t\t  this.dialogVisible = true;\r\n\t\t},\r\n\t\t// 上传失败\r\n\t\tonErr(e){\r\n\t\t\tthis.loadmen = false\r\n\t\t\tthis.$message.error('上传失败,尝试重新上传');\r\n\t\t},\r\n\t\t// 上传时\r\n\t\tproject(file){\r\n\t\t\tthis.loadmen = true\r\n\t\t},\r\n\t\t// logo移除文件时的钩子\r\n\t\tlogoRemove(file, fileList) {\r\n\t\t  this.logo = []\r\n\t\t},\r\n\t\t// 上传成功：logo\r\n\t\tlogoSuccess(res, file, fileList){\r\n\t\t\tconsole.log(res)\r\n\t\t\tconsole.log(file)\r\n\t\t\tthis.logo.push({url:res.data,uid:file.uid})//element展示图片时需要数组类型的才能展示\r\n\t\t\tthis.loadmen = false\r\n\t\t},\r\n\t\t// 返回上一页\r\n\t\treTurn(){\r\n\t\t\tthis.$router.push({name:'set-up'});\r\n\t\t},\r\n\t\t// 提交或修改\r\n\t\tbTns(is){\r\n\t\t\tthis.load = true\r\n\t\t\tconst obj = {id:this.id,name:this.name,address:this.address,logo:JSON.stringify(this.logo)}\r\n\t\t\tif(is == '提交'){\r\n\t\t\t\tconsole.log('提交')\r\n\t\t\t\tthis.purequest(obj,is,this.Urls.m().uploadshop)\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('修改')\r\n\t\t\t\t// 提交修改\r\n\t\t\t\tthis.purequest(obj,is,this.Urls.m().modifyshop)\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 提交或修改公用请求\r\n\t\tasync purequest(obj,is,url){\r\n\t\t\ttry{\r\n\t\t\t\tconst res = await new this.Request(url,this.$qs.stringify(obj)).modepost()\r\n\t\t\t\tif(res.status != 200){\r\n\t\t\t\t\tnew this.mytitle(this.$message,'warning',res.data.msg).funtitle()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnew this.mytitle(this.$message,'success',res.data.msg).funtitle()\r\n\t\t\t\t\tlocalStorage.setItem(\"company\", this.name)\r\n\t\t\t\t\tif(is == '提交'){\r\n\t\t\t\t\t\tthis.$router.push({name:'index'})\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$router.push({name:'set-up'})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.load = false\r\n\t\t\t}catch(e){\r\n\t\t\t\tthis.load = false\r\n\t\t\t\tnew this.mytitle(this.$message,'error','服务器发生错误,请重试').funtitle()\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tlet res = this.$route.params.data\r\n\t\tconsole.log(res)\r\n\t\tif(res == undefined){\r\n\t\t\tthis.whether = false\r\n\t\t\tthis.setup = '设置店铺信息'\r\n\t\t\tthis.butn = '提交'\r\n\t\t}else{\r\n\t\t\tthis.whether = true\r\n\t\t\tthis.setup = '修改店铺信息'\r\n\t\t\tthis.butn = '提交修改'\r\n\t\t\tthis.id = res._id,\r\n\t\t\tthis.name = res.name,\r\n\t\t\tthis.address = res.address,\r\n\t\t\tthis.logo = res.logo\r\n\t\t}\r\n\t}\r\n}\n</script>\n\n<style scoped=\"scoped\">\r\n.max-wid{\r\nmax-width: 800px;\r\nmargin: 0 auto;\r\nbackground-color: #FFFFFF;\npadding: 0 40px;\r\n}\r\n.heading{font-size: 20px;\r\nfont-weight: bold;\r\ntext-align: center;\r\npadding-top: 50px;\r\ndisplay: flex;\r\n}\r\n.heading-users{flex: 1;}\r\n.heading p:nth-child(1){cursor:pointer;}\r\n.image-view-title{max-width: 800px;\r\nmargin-bottom: 30px;\r\nmargin-top: 30px;\r\n}\r\n.image-view-title img{object-fit: cover;}\r\n.image-list{margin-bottom: 20px;}\r\n.el-textarea>>>.el-textarea__inner{\r\nborder: 0 !important;\r\n}\r\n.el-button--success{width: 150px;}\r\n.image-button{max-width: 800px;\r\ntext-align: center;\r\npadding: 120px 0;\r\n}\n</style>\n"],"sourceRoot":"src/page/set-up"}]}