{"version":3,"file":"square.js","sourceRoot":"","sources":["../../../../src/plots/heatmap/shapes/square.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,aAAa,EAAiB,MAAM,UAAU,CAAC;AAExD,aAAa,CAAC,SAAS,EAAE,QAAQ,EAAE;IACjC,IAAI,EAAJ,UAAK,GAAoB,EAAE,KAAa;;QACtC,IAAM,EAAE,GAAG,GAAG,CAAC,CAAW,CAAC;QAC3B,IAAM,EAAE,GAAG,GAAG,CAAC,CAAW,CAAC;QAE3B,IAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC5C,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClD,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACnD,IAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAE9C,IAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACnC,IAAM,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,IAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACtC,IAAM,UAAU,GAAG,aAAa,GAAG,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/D,IAAM,IAAI,GAAG,OAAA,GAAG,CAAC,KAAK,0CAAE,IAAI,KAAI,GAAG,CAAC,KAAK,WAAI,GAAG,CAAC,YAAY,0CAAE,IAAI,CAAA,CAAC;QACpE,IAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE;YACrC,KAAK,+BACH,CAAC,EAAE,EAAE,GAAG,UAAU,GAAG,CAAC,EACtB,CAAC,EAAE,EAAE,GAAG,UAAU,GAAG,CAAC,EACtB,KAAK,EAAE,UAAU,EACjB,MAAM,EAAE,UAAU,IACf,GAAG,CAAC,YAAY,GAChB,GAAG,CAAC,KAAK,KACZ,IAAI,MAAA,GACL;SACF,CAAC,CAAC;QACH,OAAO,OAAO,CAAC;IACjB,CAAC;CACF,CAAC,CAAC","sourcesContent":["import { registerShape, Types, IGroup } from '@antv/g2';\n\nregisterShape('polygon', 'square', {\n  draw(cfg: Types.ShapeInfo, group: IGroup) {\n    const cx = cfg.x as number;\n    const cy = cfg.y as number;\n\n    const points = this.parsePoints(cfg.points);\n    const width = Math.abs(points[2].x - points[1].x);\n    const height = Math.abs(points[1].y - points[0].y);\n    const maxSideLength = Math.min(width, height);\n\n    const value = Number(cfg.shape[1]);\n    const sizeRatio = Number(cfg.shape[2]);\n    const lenRatio = Math.sqrt(sizeRatio);\n    const sideLength = maxSideLength * lenRatio * Math.sqrt(value);\n    const fill = cfg.style?.fill || cfg.color || cfg.defaultStyle?.fill;\n    const polygon = group.addShape('rect', {\n      attrs: {\n        x: cx - sideLength / 2,\n        y: cy - sideLength / 2,\n        width: sideLength,\n        height: sideLength,\n        ...cfg.defaultStyle,\n        ...cfg.style,\n        fill,\n      },\n    });\n    return polygon;\n  },\n});\n"]}