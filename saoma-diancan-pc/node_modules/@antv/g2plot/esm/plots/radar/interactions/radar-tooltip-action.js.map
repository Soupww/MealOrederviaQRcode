{"version":3,"file":"radar-tooltip-action.js","sourceRoot":"","sources":["../../../../src/plots/radar/interactions/radar-tooltip-action.ts"],"names":[],"mappings":"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","sourcesContent":["import { registerComponentController, Util, TooltipController, Action } from '@antv/g2';\nimport { isNil } from '@antv/util';\nimport { Point } from '../../../types';\n\nexport class RadarTooltipController extends TooltipController {\n  public get name(): string {\n    return 'radar-tooltip';\n  }\n\n  public getTooltipItems(point: Point) {\n    const { shared, title: cfgTitle } = this.getTooltipCfg();\n    const hintItems = super.getTooltipItems(point);\n\n    if (hintItems.length > 0) {\n      const geometry = this.view.geometries[0];\n      const dataArray = geometry.dataArray;\n      const title = hintItems[0].name;\n      const result = [];\n      dataArray.forEach((mappingData) => {\n        mappingData.forEach((d) => {\n          const items = Util.getTooltipItems(d, geometry);\n          const item = items[0];\n          if (!shared && item && item.name === title) {\n            const displayTitle = isNil(cfgTitle) ? title : cfgTitle;\n            result.push({ ...item, name: item.title, title: displayTitle });\n          } else if (shared && item) {\n            const displayTitle = isNil(cfgTitle) ? item.name || title : cfgTitle;\n            result.push({ ...item, name: item.title, title: displayTitle });\n          }\n        });\n      });\n\n      return result;\n    }\n    return [];\n  }\n}\nregisterComponentController('radar-tooltip', RadarTooltipController);\n\n/**\n * 雷达图 tooltip 激活 action\n */\nexport class RadarTooltipAction extends Action {\n  init() {\n    const { view } = this.context;\n    view.removeInteraction('tooltip');\n  }\n\n  public show() {\n    const { event } = this.context;\n    const controller = this.getTooltipController();\n    controller.showTooltip({ x: event.x, y: event.y });\n  }\n\n  public hide() {\n    const controller = this.getTooltipController();\n    controller.hideTooltip();\n  }\n\n  private getTooltipController() {\n    const { view } = this.context;\n    return view.getController('radar-tooltip') as TooltipController;\n  }\n}\n"]}