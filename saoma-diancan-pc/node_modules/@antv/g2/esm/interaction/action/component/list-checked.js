import { __extends } from "tslib";
import { each, some } from '@antv/util';
import ListState from './list-state';
var STATUS_UNCHECKED = 'unchecked';
var STATUS_CHECKED = 'checked';
/**
 * checked Action
 * æä¾›ä¸‰ä¸ªå¯¹å¤–æ–¹æ³•
 * 1. toggle åˆ‡æ¢çŠ¶æ€
 * 2. checked é€‰ä¸­
 * 3. reset æ¸…é™¤é‡ç½®
 */
var ListChecked = /** @class */ (function (_super) {
    __extends(ListChecked, _super);
    function ListChecked() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.stateName = STATUS_CHECKED;
        return _this;
    }
    // å•ä¸ª item è®¾ç½®çŠ¶æ€
    ListChecked.prototype.setItemState = function (list, item, enable) {
        this.setCheckedBy(list, function (el) { return el === item; }, enable);
    };
    // æ ¹æ®æ¡ä»¶è®¾ç½® checked
    ListChecked.prototype.setCheckedBy = function (list, callback, enable) {
        var items = list.getItems();
        if (enable) {
            // è®¾ç½® checked æ—¶ï¼Œä¿ç•™ä¹‹å‰å·²ç» checked çš„é¡¹
            each(items, function (item) {
                if (callback(item)) {
                    if (list.hasState(item, STATUS_UNCHECKED)) {
                        list.setItemState(item, STATUS_UNCHECKED, false);
                    }
                    list.setItemState(item, STATUS_CHECKED, true);
                }
                else if (!list.hasState(item, STATUS_CHECKED)) {
                    list.setItemState(item, STATUS_UNCHECKED, true);
                }
            });
        }
    };
    /**
     * åˆ‡æ¢çŠ¶æ€.
     * 1. å½“å…¨éƒ¨é€‰ä¸­çš„æ—¶å€™ æˆ–è€… å½“å‰ item æœªé€‰ä¸­æ—¶ï¼Œè¿›è¡Œæ¿€æ´»æ“ä½œ
     * 2. å¦åˆ™ï¼Œé‡ç½®
     * @override
     */
    ListChecked.prototype.toggle = function () {
        var triggerInfo = this.getTriggerListInfo();
        if (triggerInfo && triggerInfo.item) {
            var list_1 = triggerInfo.list, item = triggerInfo.item;
            // ä¸çŸ¥é“ ğŸ¤·â€â™€ï¸ åªè®¤ unchecked status
            var allChecked = !some(list_1.getItems(), function (t) { return list_1.hasState(t, STATUS_UNCHECKED); });
            // 
            if (allChecked || list_1.hasState(item, STATUS_UNCHECKED)) {
                this.setItemState(list_1, item, true);
            }
            else {
                this.reset();
            }
        }
    };
    /**
     * checked å›¾ä¾‹é¡¹
     */
    ListChecked.prototype.checked = function () {
        this.setState();
    };
    /**
     * é‡ç½®ï¼Œéœ€è¦å…¨éƒ¨æ¸…ç† checked å’Œ unchecked
     */
    ListChecked.prototype.reset = function () {
        var components = this.getAllowComponents();
        each(components, function (component) {
            component.clearItemsState(STATUS_CHECKED);
            component.clearItemsState(STATUS_UNCHECKED);
        });
    };
    return ListChecked;
}(ListState));
export default ListChecked;
//# sourceMappingURL=list-checked.js.map