{"version":3,"file":"image.js","sourceRoot":"","sources":["../../../../src/geometry/shape/point/image.ts"],"names":[],"mappings":";;AAGA,gCAAwC;AACxC,+CAA6C;AAE7C,oBAAa,CAAC,OAAO,EAAE,OAAO,EAAE;IAC9B,IAAI,EAAJ,UAAK,GAAc,EAAE,SAAiB;QAC5B,IAAG,IAAI,GAAK,oBAAQ,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,EAArC,CAAsC;QACrD,IAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC5C,IAAI,aAAa,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI,GAAG,CAAC,OAAO,EAAE;YACf,aAAa,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;SAC3B;aAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5B,IAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;YACnC,KAAoB,UAAM,EAAN,iBAAM,EAAN,oBAAM,EAAN,IAAM,EAAE;gBAAvB,IAAM,KAAK,eAAA;gBACd,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE;oBACtB,KAAK,EAAE;wBACL,CAAC,EAAG,KAAK,CAAC,CAAY,GAAG,IAAI,GAAG,CAAC;wBACjC,CAAC,EAAG,KAAK,CAAC,CAAY,GAAG,IAAI;wBAC7B,KAAK,EAAE,IAAI;wBACX,MAAM,EAAE,IAAI;wBACZ,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;qBAClB;iBACF,CAAC,CAAC;aACJ;YAED,OAAO,KAAK,CAAC;SACd;QAED,OAAO,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE;YACjC,KAAK,EAAE;gBACL,CAAC,EAAG,aAAa,CAAC,CAAY,GAAG,IAAI,GAAG,CAAC;gBACzC,CAAC,EAAG,aAAa,CAAC,CAAY,GAAG,IAAI;gBACrC,KAAK,EAAE,IAAI;gBACX,MAAM,EAAE,IAAI;gBACZ,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;aAClB;SACF,CAAC,CAAC;IACL,CAAC;IACD,SAAS,EAAT,UAAU,SAAyB;QACzB,IAAA,KAAK,GAAK,SAAS,MAAd,CAAe;QAC5B,OAAO;YACL,MAAM,EAAE,QAAQ;YAChB,KAAK,EAAE;gBACL,CAAC,EAAE,GAAG;gBACN,IAAI,EAAE,KAAK;aACZ;SACF,CAAC;IACJ,CAAC;CACF,CAAC,CAAC","sourcesContent":["import { IGroup } from '../../../dependents';\nimport { ShapeInfo, ShapeMarkerCfg } from '../../../interface';\n\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\n\nregisterShape('point', 'image', {\n  draw(cfg: ShapeInfo, container: IGroup) {\n    const { r: size } = getStyle(cfg, false, false, 'r');\n    const points = this.parsePoints(cfg.points);\n    let pointPosition = points[0];\n    if (cfg.isStack) {\n      pointPosition = points[1];\n    } else if (points.length > 1) {\n      const group = container.addGroup();\n      for (const point of points) {\n        group.addShape('image', {\n          attrs: {\n            x: (point.x as number) - size / 2,\n            y: (point.y as number) - size,\n            width: size,\n            height: size,\n            img: cfg.shape[1],\n          },\n        });\n      }\n\n      return group;\n    }\n\n    return container.addShape('image', {\n      attrs: {\n        x: (pointPosition.x as number) - size / 2,\n        y: (pointPosition.y as number) - size,\n        width: size,\n        height: size,\n        img: cfg.shape[1],\n      },\n    });\n  },\n  getMarker(markerCfg: ShapeMarkerCfg) {\n    const { color } = markerCfg;\n    return {\n      symbol: 'circle',\n      style: {\n        r: 4.5,\n        fill: color,\n      },\n    };\n  },\n});\n"]}